var currentGenre="";var page=0;var widgetObjs=[];SC.initialize({client_id:"328ae5752ec4b2ff5d3c89f27a34fa14"});var changeFontColor=function(){$("td").each(function(){$(this).css("color","#333333")})};var bindTwo=function(e,t){e.bind(SC.Widget.Events.FINISH,function(){t.play()})};var setTriggerLoad=function(){widgetObjs[widgetObjs.length-2].bind(SC.Widget.Events.FINISH,function(){loadNextPosts()})};var linkNextPosts=function(e){widgetObjs[widgetObjs.length-5].unbind(SC.Widget.Events.FINISH);widgetObjs[widgetObjs.length-4].unbind(SC.Widget.Events.FINISH);for(var t=widgetObjs.length-5;t<widgetObjs.length-1;t++){if(t==widgetObjs.length-2){setTriggerLoad()}bindTwo(widgetObjs[t],widgetObjs[t+1])}if(typeof e=="function"){e()}};var loadNextPosts=function(){page+=1;$.get("api/posts/"+currentGenre,{page:page,limit:3,offset:6},function(e){for(i=0;i<e.length;i++){$("#posts").append(e[i].embed);widgetObjs.push(SC.Widget($("iframe:last")[0]))}linkNextPosts()})};var setAutoPlay=function(){var e=$("iframe").toArray();for(var t=0;t<e.length;t++){widgetObjs[t]=SC.Widget(e[t])}for(var t=0;t<widgetObjs.length;t++){if(t==widgetObjs.length-2){setTriggerLoad()}bindTwo(widgetObjs[t],widgetObjs[t+1])}};$("#logo").click(function(){if(currentGenre=="")return;widgetObjs=[];widgetObjs=[];$.get("/api/posts",{page:0,limit:6,offset:0},function(e){page=0;changeFontColor();$("#front").css("color","#ff4400");$("#posts").empty();for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="";setAutoPlay()})});$("#front").click(function(){if(currentGenre=="")return;widgetObjs=[];$.get("/api/posts",{page:0,limit:6,offset:0},function(e){page=0;changeFontColor();$("#posts").empty();$("#front").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="";setAutoPlay()})});$("#excite").click(function(){if(currentGenre=="excite")return;widgetObjs=[];$.get("/api/posts/excite",{page:0,limit:6,offset:0},function(e){page=0;$("#posts").empty();changeFontColor();$("#excite").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="excite";setAutoPlay()})});$("#bounce").click(function(){if(currentGenre=="bounce")return;widgetObjs=[];$.get("/api/posts/bounce",{page:0,limit:6,offset:0},function(e){page=0;$("#posts").empty();changeFontColor();$("#bounce").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="bounce";setAutoPlay()})});$("#heavy").click(function(){if(currentGenre=="heavy")return;widgetObjs=[];$.get("/api/posts/heavy",{page:0,limit:6,offset:0},function(e){page=0;$("#posts").empty();changeFontColor();$("#heavy").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="heavy";setAutoPlay()})});$("#mellow").click(function(){if(currentGenre=="mellow")return;widgetObjs=[];$.get("/api/posts/mellow",{page:0,limit:6,offset:0},function(e){page=0;$("#posts").empty();changeFontColor();$("#mellow").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="mellow";setAutoPlay()})});$("#daze").click(function(){if(currentGenre=="daze")return;widgetObjs=[];$.get("/api/posts/daze",{page:0,limit:6,offset:0},function(e){page=0;$("#posts").empty();changeFontColor();$("#daze").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="daze";setAutoPlay()})});$("#best").click(function(){if(currentGenre=="best")return;widgetObjs=[];$.get("/api/posts/best",{page:0,limit:6,offset:0},function(e){page=0;$("#posts").empty();changeFontColor();$("#best").css("color","#ff4400");for(i=0;i<e.length;i++){$("#posts").append(e[i].embed)}currentGenre="best";setAutoPlay()})});var scrollLoad=function(){if($(window).scrollTop()+$(window).height()>$(document).height()-300){$(window).off("scroll");loadNextPosts();setTimeout(function(){$(window).on("scroll",scrollLoad)},100)}};$(document).ready(function(){$("#front").css("color","#ff4400");$.get("/api/posts",{page:0,limit:6,offset:0},function(e){for(n=0;n<e.length;n++){$("#posts").append(e[n].embed)}var t=$("iframe").toArray();for(var n=0;n<t.length;n++){widgetObjs[n]=SC.Widget(t[n])}for(var n=0;n<widgetObjs.length;n++){if(n>=widgetObjs.length-2){setTriggerLoad()}bindTwo(widgetObjs[n],widgetObjs[n+1])}});setTimeout(function(){$(window).on("scroll",scrollLoad)},500)})